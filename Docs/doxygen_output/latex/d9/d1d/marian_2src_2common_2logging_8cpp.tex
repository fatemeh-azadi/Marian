\hypertarget{marian_2src_2common_2logging_8cpp}{}\section{logging.\+cpp File Reference}
\label{marian_2src_2common_2logging_8cpp}\index{logging.\+cpp@{logging.\+cpp}}
{\ttfamily \#include \char`\"{}logging.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}common/config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}spdlog/sinks/null\+\_\+sink.\+h\char`\"{}}\\*
Include dependency graph for marian/src/common/logging.cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d87/marian_2src_2common_2logging_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ spdlog\+::logger $>$ \hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderr\+Logger} (const std\+::string \&name, const std\+::string \&pattern, const std\+::vector$<$ std\+::string $>$ \&files)
\item 
bool \hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\+\_\+loglevel} (spdlog\+::logger \&logger, std\+::string const level)
\item 
\hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} \hyperlink{marian_2src_2common_2logging_8cpp_aec78c161e85dcf893e152bee3c76d82d}{checked\+Log} (std\+::string logger)
\item 
void \hyperlink{marian_2src_2common_2logging_8cpp_ac797ff0d4f04d8deeb12d6abef63d12d}{create\+Loggers} (const \hyperlink{classmarian_1_1Config}{marian\+::\+Config} $\ast$options)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}!checked\+Log@{checked\+Log}}
\index{checked\+Log@{checked\+Log}!marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}}
\subsubsection[{\texorpdfstring{checked\+Log(std\+::string logger)}{checkedLog(std::string logger)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Logger} checked\+Log (
\begin{DoxyParamCaption}
\item[{std\+::string}]{logger}
\end{DoxyParamCaption}
)}\hypertarget{marian_2src_2common_2logging_8cpp_aec78c161e85dcf893e152bee3c76d82d}{}\label{marian_2src_2common_2logging_8cpp_aec78c161e85dcf893e152bee3c76d82d}


Definition at line 50 of file marian/src/common/logging.\+cpp.


\begin{DoxyCode}
50                                     \{
51   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} ret = spdlog::get(logger);
52   \textcolor{keywordflow}{if}(ret) \{
53     \textcolor{keywordflow}{return} ret;
54   \}
55   \textcolor{keywordflow}{else} \{
56     \textcolor{keyword}{auto} null\_sink = std::make\_shared<spdlog::sinks::null\_sink\_st>();
57     \textcolor{keywordflow}{return} std::make\_shared<spdlog::logger>(\textcolor{stringliteral}{"null\_logger"}, null\_sink);
58   \}
59 \}
\end{DoxyCode}
\index{marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}!create\+Loggers@{create\+Loggers}}
\index{create\+Loggers@{create\+Loggers}!marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}}
\subsubsection[{\texorpdfstring{create\+Loggers(const marian\+::\+Config $\ast$options)}{createLoggers(const marian::Config *options)}}]{\setlength{\rightskip}{0pt plus 5cm}void create\+Loggers (
\begin{DoxyParamCaption}
\item[{const {\bf marian\+::\+Config} $\ast$}]{options}
\end{DoxyParamCaption}
)}\hypertarget{marian_2src_2common_2logging_8cpp_ac797ff0d4f04d8deeb12d6abef63d12d}{}\label{marian_2src_2common_2logging_8cpp_ac797ff0d4f04d8deeb12d6abef63d12d}


Definition at line 61 of file marian/src/common/logging.\+cpp.


\begin{DoxyCode}
61                                                 \{
62   std::vector<std::string> generalLogs;
63   std::vector<std::string> validLogs;
64   \textcolor{keywordflow}{if}(options && options->\hyperlink{classmarian_1_1Config_ab3058530188cfb4eae1bbabfcf4d6bee}{has}(\textcolor{stringliteral}{"log"})) \{
65     generalLogs.push\_back(options->\hyperlink{classmarian_1_1Config_a4a765930cfec40c60b48266ed7693109}{get}<std::string>(\textcolor{stringliteral}{"log"}));
66     validLogs.push\_back(options->\hyperlink{classmarian_1_1Config_a4a765930cfec40c60b48266ed7693109}{get}<std::string>(\textcolor{stringliteral}{"log"}));
67   \}
68 
69   \textcolor{keywordflow}{if}(options && options->\hyperlink{classmarian_1_1Config_ab3058530188cfb4eae1bbabfcf4d6bee}{has}(\textcolor{stringliteral}{"valid-log"})) \{
70     validLogs.push\_back(options->\hyperlink{classmarian_1_1Config_a4a765930cfec40c60b48266ed7693109}{get}<std::string>(\textcolor{stringliteral}{"valid-log"}));
71   \}
72 
73   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} \hyperlink{namespacefix__hard_a31eedbb056537bc1bef47ad5e40eaa68}{info}\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"info"}, \textcolor{stringliteral}{"[%Y-%m-%d %T] %v"}, generalLogs)\};
74   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} warn\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"warn"}, \textcolor{stringliteral}{"[%Y-%m-%d %T] [warn] %v"}, generalLogs)\};
75   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} config\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"config"}, \textcolor{stringliteral}{"[%Y-%m-%d %T] [config] %v"}, generalLogs)\};
76   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} memory\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"memory"}, \textcolor{stringliteral}{"[%Y-%m-%d %T] [memory] %v"}, generalLogs)\};
77   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} data\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"data"}, \textcolor{stringliteral}{"[%Y-%m-%d %T] [data] %v"}, generalLogs)\};
78   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} \hyperlink{namespacemarian_1_1keywords_a954e890640810041c811c50d386e918a}{valid}\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"valid"}, \textcolor{stringliteral}{"[%Y-%m-%d %T] [valid] %v"}, validLogs)\};
79   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} \hyperlink{amunmt_8cpp_a86ebd9110196f3b5328ad3c3d31cd007}{translate}\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"translate"}, \textcolor{stringliteral}{"%v"})\};
80   \hyperlink{marian_2src_2common_2logging_8h_a20ad7ba13c23d0b9f03f5079ec2c9bf8}{Logger} devnull\{\hyperlink{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{stderrLogger}(\textcolor{stringliteral}{"devnull"}, \textcolor{stringliteral}{"%v"})\};
81   devnull->set\_level(spdlog::level::off);
82 
83   \textcolor{keywordflow}{if}(options && options->\hyperlink{classmarian_1_1Config_ab3058530188cfb4eae1bbabfcf4d6bee}{has}(\textcolor{stringliteral}{"log-level"})) \{
84     std::string loglevel = options->\hyperlink{classmarian_1_1Config_a4a765930cfec40c60b48266ed7693109}{get}<std::string>(\textcolor{stringliteral}{"log-level"});
85     \textcolor{keywordflow}{if} (!\hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\_loglevel}(*\hyperlink{namespacefix__hard_a31eedbb056537bc1bef47ad5e40eaa68}{info}, loglevel)) \textcolor{keywordflow}{return};
86     \hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\_loglevel}(*warn, loglevel);
87     \hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\_loglevel}(*config, loglevel);
88     \hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\_loglevel}(*memory, loglevel);
89     \hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\_loglevel}(*data, loglevel);
90     \hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\_loglevel}(*\hyperlink{namespacemarian_1_1keywords_a954e890640810041c811c50d386e918a}{valid}, loglevel);
91     \hyperlink{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{set\_loglevel}(*\hyperlink{amunmt_8cpp_a86ebd9110196f3b5328ad3c3d31cd007}{translate}, loglevel);
92   \}
93 
94 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d1d/marian_2src_2common_2logging_8cpp_ac797ff0d4f04d8deeb12d6abef63d12d_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{d9/d1d/marian_2src_2common_2logging_8cpp_ac797ff0d4f04d8deeb12d6abef63d12d_icgraph}
\end{center}
\end{figure}


\index{marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}!set\+\_\+loglevel@{set\+\_\+loglevel}}
\index{set\+\_\+loglevel@{set\+\_\+loglevel}!marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}}
\subsubsection[{\texorpdfstring{set\+\_\+loglevel(spdlog\+::logger \&logger, std\+::string const level)}{set_loglevel(spdlog::logger &logger, std::string const level)}}]{\setlength{\rightskip}{0pt plus 5cm}bool set\+\_\+loglevel (
\begin{DoxyParamCaption}
\item[{spdlog\+::logger \&}]{logger, }
\item[{std\+::string const}]{level}
\end{DoxyParamCaption}
)}\hypertarget{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}{}\label{marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b}


Definition at line 29 of file marian/src/common/logging.\+cpp.


\begin{DoxyCode}
29                                                           \{
30   \textcolor{keywordflow}{if} (level == \textcolor{stringliteral}{"trace"})
31     logger.set\_level(spdlog::level::trace);
32   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level == \textcolor{stringliteral}{"debug"})
33     logger.set\_level(\hyperlink{namespacemarian_a442bfa469f081af4c2665c341efc71ce}{spdlog::level::debug});
34   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level == \textcolor{stringliteral}{"info"})
35     logger.set\_level(\hyperlink{namespacefix__hard_a31eedbb056537bc1bef47ad5e40eaa68}{spdlog::level::info});
36   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level == \textcolor{stringliteral}{"err"} or level == \textcolor{stringliteral}{"error"})
37     logger.set\_level(spdlog::level::err);
38   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level == \textcolor{stringliteral}{"critical"})
39     logger.set\_level(spdlog::level::critical);
40   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (level == \textcolor{stringliteral}{"off"})
41     logger.set\_level(spdlog::level::off);
42   \textcolor{keywordflow}{else} \{
43     logger.warn(\textcolor{stringliteral}{"Unknown log level '\{\}' for logger '\{\}'"},
44                 level.c\_str(), logger.name().c\_str());
45     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
46   \}
47   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
48 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{d9/d1d/marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d1d/marian_2src_2common_2logging_8cpp_af2dc599148e697fad3ad660d2b8cab9b_icgraph}
\end{center}
\end{figure}


\index{marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}!stderr\+Logger@{stderr\+Logger}}
\index{stderr\+Logger@{stderr\+Logger}!marian/src/common/logging.\+cpp@{marian/src/common/logging.\+cpp}}
\subsubsection[{\texorpdfstring{stderr\+Logger(const std\+::string \&name, const std\+::string \&pattern, const std\+::vector$<$ std\+::string $>$ \&files)}{stderrLogger(const std::string &name, const std::string &pattern, const std::vector< std::string > &files)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::shared\+\_\+ptr$<$spdlog\+::logger$>$ stderr\+Logger (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{name, }
\item[{const std\+::string \&}]{pattern, }
\item[{const std\+::vector$<$ std\+::string $>$ \&}]{files}
\end{DoxyParamCaption}
)}\hypertarget{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}{}\label{marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859}


Definition at line 5 of file marian/src/common/logging.\+cpp.


\begin{DoxyCode}
8                                        \{
9   std::vector<spdlog::sink\_ptr> sinks;
10 
11   \textcolor{keyword}{auto} stderr\_sink = spdlog::sinks::stderr\_sink\_mt::instance();
12   sinks.push\_back(stderr\_sink);
13 
14   \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}&& file : files) \{
15     \textcolor{keyword}{auto} file\_sink
16         = std::make\_shared<spdlog::sinks::simple\_file\_sink\_st>(file, \textcolor{keyword}{true});
17     sinks.push\_back(file\_sink);
18   \}
19 
20   \textcolor{keyword}{auto} logger
21       = std::make\_shared<spdlog::logger>(name, begin(sinks), end(sinks));
22 
23   spdlog::register\_logger(logger);
24   logger->set\_pattern(pattern);
25   \textcolor{keywordflow}{return} logger;
26 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d1d/marian_2src_2common_2logging_8cpp_a10c1e66ee3fa438b4ace092d78dfe859_icgraph}
\end{center}
\end{figure}


