\hypertarget{classmarian_1_1CrossEntropyValidator}{}\section{marian\+:\+:Cross\+Entropy\+Validator$<$ Builder $>$ Class Template Reference}
\label{classmarian_1_1CrossEntropyValidator}\index{marian\+::\+Cross\+Entropy\+Validator$<$ Builder $>$@{marian\+::\+Cross\+Entropy\+Validator$<$ Builder $>$}}


{\ttfamily \#include $<$validator.\+h$>$}



Inheritance diagram for marian\+:\+:Cross\+Entropy\+Validator$<$ Builder $>$\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=230pt]{da/d1f/classmarian_1_1CrossEntropyValidator__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for marian\+:\+:Cross\+Entropy\+Validator$<$ Builder $>$\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=230pt]{db/d6d/classmarian_1_1CrossEntropyValidator__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$class... Args$>$ }\\\hyperlink{classmarian_1_1CrossEntropyValidator_afe80130ac707b42b56db3785a5ff89f1}{Cross\+Entropy\+Validator} (std\+::vector$<$ \hyperlink{namespacemarian_ad1a373be43a00ef9ce35666145137b08}{Ptr}$<$ \hyperlink{classmarian_1_1Vocab}{Vocab} $>$$>$ vocabs, \hyperlink{namespacemarian_ad1a373be43a00ef9ce35666145137b08}{Ptr}$<$ \hyperlink{classmarian_1_1Config}{Config} $>$ options, Args...\+args)
\item 
virtual float \hyperlink{classmarian_1_1CrossEntropyValidator_a2b49c37174062b22629073328997dd6c}{validate\+BG} (\hyperlink{namespacemarian_ad1a373be43a00ef9ce35666145137b08}{Ptr}$<$ \hyperlink{classmarian_1_1ExpressionGraph}{Expression\+Graph} $>$ graph, \hyperlink{namespacemarian_ad1a373be43a00ef9ce35666145137b08}{Ptr}$<$ \hyperlink{classmarian_1_1data_1_1BatchGenerator}{data\+::\+Batch\+Generator}$<$ \hyperlink{classmarian_1_1data_1_1Corpus}{data\+::\+Corpus} $>$$>$ batch\+Generator)
\item 
virtual void \hyperlink{classmarian_1_1CrossEntropyValidator_a18a18f95bfd4fc63653c06ed03ea612e}{keep\+Best} (\hyperlink{namespacemarian_ad1a373be43a00ef9ce35666145137b08}{Ptr}$<$ \hyperlink{classmarian_1_1ExpressionGraph}{Expression\+Graph} $>$ graph)
\item 
std\+::string \hyperlink{classmarian_1_1CrossEntropyValidator_a268534ff39447d8c5f95fba5bc18d458}{type} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespacemarian_ad1a373be43a00ef9ce35666145137b08}{Ptr}$<$ Builder $>$ \hyperlink{classmarian_1_1CrossEntropyValidator_ab714cc2a2867a2eee8507627b52940c6}{builder\+\_\+}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\subsubsection*{template$<$class Builder$>$\\*
class marian\+::\+Cross\+Entropy\+Validator$<$ Builder $>$}



Definition at line 77 of file training/validator.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}!Cross\+Entropy\+Validator@{Cross\+Entropy\+Validator}}
\index{Cross\+Entropy\+Validator@{Cross\+Entropy\+Validator}!marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}}
\subsubsection[{\texorpdfstring{Cross\+Entropy\+Validator(std\+::vector$<$ Ptr$<$ Vocab $>$$>$ vocabs, Ptr$<$ Config $>$ options, Args...\+args)}{CrossEntropyValidator(std::vector< Ptr< Vocab >> vocabs, Ptr< Config > options, Args...args)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class Builder $>$ template$<$class... Args$>$ {\bf marian\+::\+Cross\+Entropy\+Validator}$<$ Builder $>$\+::{\bf Cross\+Entropy\+Validator} (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ {\bf Ptr}$<$ {\bf Vocab} $>$$>$}]{vocabs, }
\item[{{\bf Ptr}$<$ {\bf Config} $>$}]{options, }
\item[{Args...}]{args}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classmarian_1_1CrossEntropyValidator_afe80130ac707b42b56db3785a5ff89f1}{}\label{classmarian_1_1CrossEntropyValidator_afe80130ac707b42b56db3785a5ff89f1}


Definition at line 83 of file training/validator.\+h.


\begin{DoxyCode}
86       : \hyperlink{classmarian_1_1Validator_a438455be8ec5c8e0158ad4d8586b6d51}{Validator}(vocabs, options),
87         \hyperlink{classmarian_1_1CrossEntropyValidator_ab714cc2a2867a2eee8507627b52940c6}{builder\_}(New<Builder>(options, \hyperlink{namespacemarian_1_1keywords_a7164ab5ae8f1206943787d0891d89735}{keywords::inference} = \textcolor{keyword}{true}, args...)) \{
88     \hyperlink{classmarian_1_1Validator_a6f65080ef5845f74757a5deafc5a397f}{initLastBest}();
89   \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dde/classmarian_1_1CrossEntropyValidator_afe80130ac707b42b56db3785a5ff89f1_cgraph}
\end{center}
\end{figure}




\subsection{Member Function Documentation}
\index{marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}!keep\+Best@{keep\+Best}}
\index{keep\+Best@{keep\+Best}!marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}}
\subsubsection[{\texorpdfstring{keep\+Best(\+Ptr$<$ Expression\+Graph $>$ graph)}{keepBest(Ptr< ExpressionGraph > graph)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class Builder $>$ virtual void {\bf marian\+::\+Cross\+Entropy\+Validator}$<$ Builder $>$\+::keep\+Best (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Expression\+Graph} $>$}]{graph}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classmarian_1_1CrossEntropyValidator_a18a18f95bfd4fc63653c06ed03ea612e}{}\label{classmarian_1_1CrossEntropyValidator_a18a18f95bfd4fc63653c06ed03ea612e}


Implements \hyperlink{classmarian_1_1Validator_ab70989b9c6aef7dc0d0655fd066e7fa9}{marian\+::\+Validator$<$ data\+::\+Corpus $>$}.



Definition at line 109 of file training/validator.\+h.


\begin{DoxyCode}
109                                                     \{
110     \textcolor{keyword}{auto} model = \hyperlink{classmarian_1_1Validator_a59fc30678618608874029374e386d3c0}{options\_}->get<std::string>(\textcolor{stringliteral}{"model"});
111     \hyperlink{classmarian_1_1CrossEntropyValidator_ab714cc2a2867a2eee8507627b52940c6}{builder\_}->save(graph, model + \textcolor{stringliteral}{".best-"} + \hyperlink{classmarian_1_1CrossEntropyValidator_a268534ff39447d8c5f95fba5bc18d458}{type}() + \textcolor{stringliteral}{".npz"}, \textcolor{keyword}{true});
112   \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dde/classmarian_1_1CrossEntropyValidator_a18a18f95bfd4fc63653c06ed03ea612e_cgraph}
\end{center}
\end{figure}


\index{marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}!type@{type}}
\index{type@{type}!marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}}
\subsubsection[{\texorpdfstring{type()}{type()}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class Builder $>$ std\+::string {\bf marian\+::\+Cross\+Entropy\+Validator}$<$ Builder $>$\+::type (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classmarian_1_1CrossEntropyValidator_a268534ff39447d8c5f95fba5bc18d458}{}\label{classmarian_1_1CrossEntropyValidator_a268534ff39447d8c5f95fba5bc18d458}


Implements \hyperlink{classmarian_1_1Validator_a46fae77a7ebd17d3727beb0858f025f0}{marian\+::\+Validator$<$ data\+::\+Corpus $>$}.



Definition at line 114 of file training/validator.\+h.


\begin{DoxyCode}
114 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"cross-entropy"}; \}
\end{DoxyCode}
\index{marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}!validate\+BG@{validate\+BG}}
\index{validate\+BG@{validate\+BG}!marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}}
\subsubsection[{\texorpdfstring{validate\+B\+G(\+Ptr$<$ Expression\+Graph $>$ graph, Ptr$<$ data\+::\+Batch\+Generator$<$ data\+::\+Corpus $>$$>$ batch\+Generator)}{validateBG(Ptr< ExpressionGraph > graph, Ptr< data::BatchGenerator< data::Corpus >> batchGenerator)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class Builder $>$ virtual float {\bf marian\+::\+Cross\+Entropy\+Validator}$<$ Builder $>$\+::validate\+BG (
\begin{DoxyParamCaption}
\item[{{\bf Ptr}$<$ {\bf Expression\+Graph} $>$}]{graph, }
\item[{{\bf Ptr}$<$ {\bf data\+::\+Batch\+Generator}$<$ {\bf data\+::\+Corpus} $>$$>$}]{batch\+Generator}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classmarian_1_1CrossEntropyValidator_a2b49c37174062b22629073328997dd6c}{}\label{classmarian_1_1CrossEntropyValidator_a2b49c37174062b22629073328997dd6c}


Implements \hyperlink{classmarian_1_1Validator_a62416349540dc2b628b70b4f401c4a49}{marian\+::\+Validator$<$ data\+::\+Corpus $>$}.



Definition at line 91 of file training/validator.\+h.


\begin{DoxyCode}
93                                                           \{
94     \textcolor{keywordtype}{float} cost = 0;
95     \textcolor{keywordtype}{size\_t} samples = 0;
96 
97     \textcolor{keywordflow}{while}(*batchGenerator) \{
98       \textcolor{keyword}{auto} batch = batchGenerator->next();
99       \textcolor{keyword}{auto} costNode = \hyperlink{classmarian_1_1CrossEntropyValidator_ab714cc2a2867a2eee8507627b52940c6}{builder\_}->build(graph, batch);
100       graph->forward();
101 
102       cost += costNode->scalar() * batch->size();
103       samples += batch->size();
104     \}
105 
106     \textcolor{keywordflow}{return} cost / samples;
107   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}!builder\+\_\+@{builder\+\_\+}}
\index{builder\+\_\+@{builder\+\_\+}!marian\+::\+Cross\+Entropy\+Validator@{marian\+::\+Cross\+Entropy\+Validator}}
\subsubsection[{\texorpdfstring{builder\+\_\+}{builder_}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class Builder $>$ {\bf Ptr}$<$Builder$>$ {\bf marian\+::\+Cross\+Entropy\+Validator}$<$ Builder $>$\+::builder\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classmarian_1_1CrossEntropyValidator_ab714cc2a2867a2eee8507627b52940c6}{}\label{classmarian_1_1CrossEntropyValidator_ab714cc2a2867a2eee8507627b52940c6}


Definition at line 79 of file training/validator.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{training_2validator_8h}{training/validator.\+h}\end{DoxyCompactItemize}
